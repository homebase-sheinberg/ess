# to get all new task code
cd ~
git clone https://github.com/homebase-sheinberg/ess.git
sudo git config --system --add safe.directory /home/lab/ess
sudo nano /usr/local/dserv/local/pre-systemdir.tcl

#add this line
set env(ESS_SYSTEM_PATH) /home/lab/


# updating dserv
cd /tmp
wget https://github.com/SheinbergLab/dserv/releases/download/0.8.5/dserv_0.8.5_arm64.debwget -qO- https://api.github.com/repos/SheinbergLab/dserv/releases/latest \
  | grep -m 1 '"browser_download_url":.*arm64\.deb"' \
  | cut -d '"' -f 4 \
  | xargs -n 1 wget -O dserv_latest_arm64.deb
  
sudo systemctl stop dserv
sudo apt install ./dserv_latest_arm64.deb
sudo systemctl start dserv
sudo systemctl status dserv


#updating essgui
cd /tmp
wget -qO- https://api.github.com/repos/SheinbergLab/essgui/releases/latest \
  | grep -m 1 '"browser_download_url":.*win-arm64\.exe"' \
  | cut -d '"' -f 4 \
  | xargs -n 1 wget -O essgui_latest_win_arm64.exe
  
  sudo apt install ./essgui_latest_arm64.deb

